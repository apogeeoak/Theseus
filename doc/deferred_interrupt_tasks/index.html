<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Abstractions for deferred interrupt tasks, a companion to regular interrupt handlers."><meta name="keywords" content="rust, rustlang, rust-lang, deferred_interrupt_tasks"><title>deferred_interrupt_tasks - Rust</title><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../ayu.css" disabled ><script id="default-settings"></script><script src="../storage.js"></script><script src="../crates.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="icon" type="image/svg+xml" href="../favicon.svg">
<link rel="alternate icon" type="image/png" href="../favicon-16x16.png">
<link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><style type="text/css">#crate-search{background-image:url("../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../deferred_interrupt_tasks/index.html'><div class='logo-container rust-logo'><img src='../rust-logo.png' alt='logo'></div></a><p class="location">Crate deferred_interrupt_tasks</p><div class="block version"><p>Version 0.1.0</p></div><div class="sidebar-elems"><a id="all-types" href="all.html"><p>See all deferred_interrupt_tasks's items</p></a><div class="block items"><ul><li><a href="#enums">Enums</a></li><li><a href="#functions">Functions</a></li><li><a href="#types">Type Definitions</a></li></ul></div><p class="location"></p><div id="sidebar-vars" data-name="deferred_interrupt_tasks" data-ty="mod" data-relpath="../"></div><script defer src="../sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu"><img src="../brush.svg" width="18" height="18" alt="Pick another theme!"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button">?</button>
                <a id="settings-menu" href="../settings.html"><img src="../wheel.svg" width="18" height="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Crate <a class="mod" href="">deferred_interrupt_tasks</a><button id="copy-path" onclick="copy_path(this)"><img src="../clipboard.svg" width="19" height="18" alt="Copy item import"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../src/deferred_interrupt_tasks/lib.rs.html#1-177" title="goto source code">[src]</a></span></h1><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Abstractions for deferred interrupt tasks, a companion to regular interrupt handlers.</p>
<p>Deferred interrupt tasks are similar to the concept of “top half” and “bottom half”
interrupt handlers in other OSes, in which the top half is the short, latency-sensitive
function that runs immediately when the interrupt request is serviced,
while the bottom half is the more complex function that runs in a deferred manner
to handle longer operations.
Other terminology is often used, including “first-level” and
“second-level” interrupt handlers, or “hard” and “soft” interrupt handlers.</p>
<p>That being said, this implementation of deferred interrupt tasks
differs from both tasklets and workqueues in Linux.
We also do not use the “top half” or “bottom half” terminology
because it is confusing and difficult to remember which is which.
Instead, we refer to the first latency-sensitive part as the
<em>interrupt handler</em> and the second later part as the <em>deferred task</em>.
The “interrupt handler” runs immediately (in a synchronous fashion) 
when the interrupt occurs, while the deferred task runs asynchronously
at some time in the future, ideally as soon as possible.</p>
<p>The general idea is that an interrupt handler should be short
and do the minimum amount of work possible in order to keep 
the system responsive, because all (or most) other interrupts
are typically disabled while the interrupt handler executes to completion.
Thus, most of the work should be deferred until later, such that the
interrupt handler itself only does a couple of quick things:</p>
<ul>
<li>Notifies the deferred task that work is ready to be done,
optionally providing details about what work it needs to do,</li>
<li>Acknowledges the interrupt such that the hardware knows it was handled.</li>
</ul>
<p>The deferred task is tied directly to a single interrupt handler in a 1-to-1 manner
at the time of creation, which occurs in <a href="fn.register_interrupt_handler.html" title="register_interrupt_handler()"><code>register_interrupt_handler()</code></a>.
Therefore, it is both efficient and easy to use. 
In the simplest of cases, such as a serial port device, the interrupt handler
only needs to mark the deferred task as unblocked (runnable)
and then acknowledge the interrupt. 
No other data exchange is needed between the interrupt handler and the 
deferred task.
For more complicated cases, the interrupt handler may need to do a minimal
amount of bookkeeping tasks (such as advancing a ringbuffer index)
and potentially send some information about what the deferred task should do.
It is typically best to use a lock-free queue or an interrupt-safe mutex
to share such information between the interrupt handler and deferred task.</p>
</div></details><h2 id="enums" class="section-header"><a href="#enums">Enums</a></h2>
<table><tr class="module-item"><td><a class="enum" href="enum.InterruptRegistrationError.html" title="deferred_interrupt_tasks::InterruptRegistrationError enum">InterruptRegistrationError</a></td><td class="docblock-short"><p>The errors that may occur in <a href="fn.register_interrupt_handler.html" title="register_interrupt_handler()"><code>register_interrupt_handler()</code></a>.</p>
</td></tr></table><h2 id="functions" class="section-header"><a href="#functions">Functions</a></h2>
<table><tr class="module-item"><td><a class="fn" href="fn.register_interrupt_handler.html" title="deferred_interrupt_tasks::register_interrupt_handler fn">register_interrupt_handler</a></td><td class="docblock-short"><p>Registers an interrupt handler and spawns a companion “deferred task” 
that asynchronously handles the longer-running operations related to that interrupt.</p>
</td></tr></table><h2 id="types" class="section-header"><a href="#types">Type Definitions</a></h2>
<table><tr class="module-item"><td><a class="type" href="type.InterruptHandlerFunction.html" title="deferred_interrupt_tasks::InterruptHandlerFunction type">InterruptHandlerFunction</a></td><td class="docblock-short"></td></tr></table></section><section id="search" class="content hidden"></section><div id="rustdoc-vars" data-root-path="../" data-current-crate="deferred_interrupt_tasks" data-search-index-js="../search-index.js" data-search-js="../search.js"></div>
    <script src="../main.js"></script></body></html>